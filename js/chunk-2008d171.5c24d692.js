(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2008d171"],{"0379":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"my-5"},[e("ul",{staticClass:"progressbar list-unstyled d-flex justify-content-between"},[e("li",{staticClass:"active"},[t._v("查看購物明細")]),e("li",[t._v("填寫訂單資料")]),e("li",[t._v("確認訂單完成")])])])}],n={},c=n,r=(e("8150"),e("2877")),o=Object(r["a"])(c,s,i,!1,null,null,null);a["a"]=o.exports},3305:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"cart"}},[e("AlertMessage"),e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("Progressbar"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8 mb-4 mx-auto"},[e("h5",{staticClass:"text-center py-3 bg-primary text-white rounded"},[t._v("購物車")]),0==t.cart.length?e("div",{staticClass:"text-center mt-5"},[e("i",{staticClass:"fas fa-shopping-cart text-secondary fa-5x mb-5"}),e("p",{staticClass:"h3 mb-5"},[t._v("購物車還是空的喔！")]),t._m(0),e("div",{staticClass:"mt-5"},[e("button",{staticClass:"btn btn-primary btn-lg",on:{click:t.goToGoods}},[t._v(" 去商場逛逛 ")])])]):e("table",{staticClass:"table text-center cartinfo"},[e("tbody",t._l(t.cart,(function(a){return e("tr",{key:a.product.id+1},[e("td",{staticClass:"align-middle text-center",attrs:{width:"30"}},[e("a",{staticClass:"text-secondary trash",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeCartItem(a.product.id)}}},[e("i",{staticClass:"far fa-trash-alt ",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"image align-middle",attrs:{width:"100"}},[e("img",{attrs:{src:a.product.imageUrl[0],alt:a.product.title,width:"100%"}})]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" ")]),e("td",{staticClass:"d-flex align-items-center  justify-content-center countNumber",attrs:{width:"100"}},[e("button",{staticClass:"btn minus btn-primary",attrs:{type:"button",disabled:1==a.quantity},on:{click:function(e){a.quantity--,t.updateQuantity(a.product.id,a.quantity)}}},[e("i",{staticClass:"fas fa-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"productNumber text-center form-control rounded-0",attrs:{type:"number",max:"10",min:"1"},domProps:{value:a.quantity},on:{change:function(e){return t.updateQuantity(a.product.id,a.quantity)},input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("button",{staticClass:"btn add btn-primary",attrs:{type:"button",disabled:t.loadingCart===a.product.id},on:{click:function(e){a.quantity++,t.updateQuantity(a.product.id,a.quantity)}}},[e("i",{staticClass:"fas fa-plus"})])]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.product.price)))])])})),0)]),t.cart.length?e("div",[e("table",{staticClass:"table mt-4x"},[e("tbody",{staticClass:"text-secondary"},[e("tr",[t._m(1),e("td",{staticClass:"text-right"},[e("strong",[t._v("$"+t._s(t.shippingFee))])])]),e("tr",{staticClass:"h5 text-dark"},[t._m(2),e("td",{staticClass:"text-right"},[e("strong",[t._v(t._s(t._f("currency")(t.cartTotal+t.shippingFee)))])])])])])]):t._e(),t.cart.length?e("div",{staticClass:"form-row"},[e("div",{staticClass:"col"},[e("button",{staticClass:"btn btn-outline-secondary btn-block",on:{click:t.goToGoods}},[e("i",{staticClass:"fas fa-arrow-left mr-2"}),t._v(" 繼續購物 ")])]),e("div",{staticClass:"col"},[e("button",{staticClass:"btn btn-primary btn-block",on:{click:t.goToCheck}},[t._v(" 繼續付款 "),e("i",{staticClass:"fas fa-arrow-right ml-2"})])])]):t._e()])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"h5 text-secondary"},[t._v("“再忙，也別忘了犒賞自己唷！“ "),e("i",{staticClass:"far fa-smile-wink"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("strong",[t._v("運費")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("strong",[t._v("共計")])])}],n=(e("99af"),e("4160"),e("159b"),e("0379")),c=e("56a6"),r={name:"Cart",components:{Progressbar:n["a"],AlertMessage:c["a"]},data:function(){return{products:[],cart:{},cartTotal:0,shippingFee:0,isLoading:!1,loadingCart:"",form:{name:"",email:"",tel:"",address:"",payment:"",message:""},coupon:{},coupon_code:""}},methods:{getProducts:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/products");t.$http.get(a).then((function(a){t.products=a.data.data}))},getCart:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/shopping");t.isLoading=!0,t.$http.get(a).then((function(a){t.cart=a.data.data,t.cartTotal=0,t.updateTotal(),t.isLoading=!1}))},updateTotal:function(){var t=this;t.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity})),t.cart.length?t.cartTotal<1e3&&(t.shippingFee=60):t.shippingFee=0},updateQuantity:function(t,a){var e=this;if(e.loadingCart=t,a>10)e.$bus.$emit("message:push","數量不可超過 10 喔!","danger");else if(a<1)e.$bus.$emit("message:push","數量不可少於 1 喔!","danger");else{e.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/shopping"),i={product:t,quantity:a};e.$http.patch(s,i).then((function(){e.loadingCart="",e.getCart(),e.isLoading=!1}))}},removeCartItem:function(t){var a=this,e="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/shopping/").concat(t);a.isLoading=!0,a.$http.delete(e).then((function(){a.getCart(),a.$bus.$emit("getcart"),a.isLoading=!1}))},addCoupon:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/coupon/search");t.isLoading=!0,t.$http.post(a,{code:this.coupon_code}).then((function(a){t.coupon=a.data.data,t.$bus.$emit("message:push","成功使用優惠券。","success"),t.isLoading=!1})).catch((function(a){var e=a.response.data.message;t.$bus.$emit("message:push","".concat(e),"danger"),t.isLoading=!1}))},goToCheck:function(){this.$router.push("/checkout")},goToGoods:function(){this.$router.push("/goods")}},created:function(){this.getProducts(),this.getCart()}},o=r,u=e("2877"),l=Object(u["a"])(o,s,i,!1,null,null,null);a["default"]=l.exports},"56a6":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert"},t._l(t.messages,(function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},["danger"==a.status?e("i",{staticClass:"far fa-times-circle"}):e("i",{staticClass:"far fa-check-circle"}),t._v(" "+t._s(a.message)+" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},i=[],n=(e("4160"),e("a434"),e("159b"),{name:"AlertMessage",data:function(){return{messages:[]}},created:function(){var t=this;t.$bus.$on("message:push",(function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)}))},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout((function(){a.messages.forEach((function(e,s){e.timestamp===t&&a.messages.splice(s,1)}))}),5e3)}}}),c=n,r=(e("e7ca"),e("2877")),o=Object(r["a"])(c,s,i,!1,null,"2c3f2ad2",null);a["a"]=o.exports},"72a6":function(t,a,e){},8150:function(t,a,e){"use strict";var s=e("72a6"),i=e.n(s);i.a},8418:function(t,a,e){"use strict";var s=e("c04e"),i=e("9bf2"),n=e("5c6c");t.exports=function(t,a,e){var c=s(a);c in t?i.f(t,c,n(0,e)):t[c]=e}},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),n=e("e8b5"),c=e("861d"),r=e("7b0b"),o=e("50c4"),u=e("8418"),l=e("65f0"),d=e("1dde"),f=e("b622"),p=e("2d00"),h=f("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",b=p>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),v=d("concat"),C=function(t){if(!c(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},_=!b||!v;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,i,n,c=r(this),d=l(c,0),f=0;for(a=-1,s=arguments.length;a<s;a++)if(n=-1===a?c:arguments[a],C(n)){if(i=o(n.length),f+i>g)throw TypeError(m);for(e=0;e<i;e++,f++)e in n&&u(d,f,n[e])}else{if(f>=g)throw TypeError(m);u(d,f++,n)}return d.length=f,d}})},a434:function(t,a,e){"use strict";var s=e("23e7"),i=e("23cb"),n=e("a691"),c=e("50c4"),r=e("7b0b"),o=e("65f0"),u=e("8418"),l=e("1dde"),d=e("ae40"),f=l("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,g=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,a){var e,s,l,d,f,p,v=r(this),C=c(v.length),_=i(t,C),y=arguments.length;if(0===y?e=s=0:1===y?(e=0,s=C-_):(e=y-2,s=g(h(n(a),0),C-_)),C+e-s>m)throw TypeError(b);for(l=o(v,s),d=0;d<s;d++)f=_+d,f in v&&u(l,d,v[f]);if(l.length=s,e<s){for(d=_;d<C-s;d++)f=d+s,p=d+e,f in v?v[p]=v[f]:delete v[p];for(d=C;d>C-s+e;d--)delete v[d-1]}else if(e>s)for(d=C-s;d>_;d--)f=d+s-1,p=d+e-1,f in v?v[p]=v[f]:delete v[p];for(d=0;d<e;d++)v[d+_]=arguments[d+2];return v.length=C-s+e,l}})},e6d3:function(t,a,e){},e7ca:function(t,a,e){"use strict";var s=e("e6d3"),i=e.n(s);i.a}}]);
//# sourceMappingURL=chunk-2008d171.5c24d692.js.map