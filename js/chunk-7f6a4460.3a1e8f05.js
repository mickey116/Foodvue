(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f6a4460"],{"56a6":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert"},t._l(t.messages,(function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},["danger"==a.status?e("i",{staticClass:"far fa-times-circle"}):e("i",{staticClass:"far fa-check-circle"}),t._v(" "+t._s(a.message)+" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},i=[],r=(e("4160"),e("a434"),e("159b"),{name:"AlertMessage",data:function(){return{messages:[]}},created:function(){var t=this;t.$bus.$on("message:push",(function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)}))},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout((function(){a.messages.forEach((function(e,s){e.timestamp===t&&a.messages.splice(s,1)}))}),5e3)}}}),n=r,o=(e("e7ca"),e("2877")),c=Object(o["a"])(n,s,i,!1,null,"2c3f2ad2",null);a["a"]=c.exports},8418:function(t,a,e){"use strict";var s=e("c04e"),i=e("9bf2"),r=e("5c6c");t.exports=function(t,a,e){var n=s(a);n in t?i.f(t,n,r(0,e)):t[n]=e}},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),r=e("e8b5"),n=e("861d"),o=e("7b0b"),c=e("50c4"),l=e("8418"),d=e("65f0"),f=e("1dde"),u=e("b622"),g=e("2d00"),h=u("isConcatSpreadable"),m=9007199254740991,p="Maximum allowed index exceeded",v=g>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=f("concat"),C=function(t){if(!n(t))return!1;var a=t[h];return void 0!==a?!!a:r(t)},w=!v||!b;s({target:"Array",proto:!0,forced:w},{concat:function(t){var a,e,s,i,r,n=o(this),f=d(n,0),u=0;for(a=-1,s=arguments.length;a<s;a++)if(r=-1===a?n:arguments[a],C(r)){if(i=c(r.length),u+i>m)throw TypeError(p);for(e=0;e<i;e++,u++)e in r&&l(f,u,r[e])}else{if(u>=m)throw TypeError(p);l(f,u++,r)}return f.length=u,f}})},a434:function(t,a,e){"use strict";var s=e("23e7"),i=e("23cb"),r=e("a691"),n=e("50c4"),o=e("7b0b"),c=e("65f0"),l=e("8418"),d=e("1dde"),f=e("ae40"),u=d("splice"),g=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!u||!g},{splice:function(t,a){var e,s,d,f,u,g,b=o(this),C=n(b.length),w=i(t,C),x=arguments.length;if(0===x?e=s=0:1===x?(e=0,s=C-w):(e=x-2,s=m(h(r(a),0),C-w)),C+e-s>p)throw TypeError(v);for(d=c(b,s),f=0;f<s;f++)u=w+f,u in b&&l(d,f,b[u]);if(d.length=s,e<s){for(f=w;f<C-s;f++)u=f+s,g=f+e,u in b?b[g]=b[u]:delete b[g];for(f=C;f>C-s+e;f--)delete b[f-1]}else if(e>s)for(f=C-s;f>w;f--)u=f+s-1,g=f+e-1,u in b?b[g]=b[u]:delete b[g];for(f=0;f<e;f++)b[f+w]=arguments[f+2];return b.length=C-s+e,d}})},b27a:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container",attrs:{id:"favorite"}},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("AlertMessage"),e("div",{staticClass:"favbannerbox"},[e("div",{staticClass:"favbanner mb-4  mt-3 mt-lg-0",style:{backgroundImage:"url("+t.img.banner+")"}}),e("h2",{staticClass:"mb-0"},[t._v("我的收藏")])]),e("div",{staticClass:"favoritedetail mb-3"},[e("h5",{staticClass:"text-center py-3 bg-primary text-white rounded"},[t._v(" 收藏列表（ "+t._s(t.followProduct.length)+" ）")]),0==t.followProduct.length?e("div",{staticClass:"text-center mt-5"},[e("i",{staticClass:"fas fa-shopping-cart text-secondary fa-5x mb-5"}),e("p",{staticClass:"h3 mb-5"},[t._v("您尚未收藏任何商品唷！")]),t._m(0),e("div",{staticClass:"mt-5"},[e("button",{staticClass:"btn btn-primary btn-lg",on:{click:t.goToGoods}},[t._v(" 去商場逛逛 "),e("i",{staticClass:"fas fa-store-alt"})])])]):e("table",{staticClass:"table text-center"},[e("tbody",t._l(t.followProduct,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("a",{staticClass:"text-secondary trash",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.delFollow(a.id)}}},[e("i",{staticClass:"far fa-trash-alt ",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"image align-middle",attrs:{width:"100"}},[e("img",{attrs:{src:a.imageUrl[0],alt:a.title,width:"100%"}})]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.title)+" ")]),e("td",{staticClass:"align-middle text-right",attrs:{width:"80"}},[t._v(t._s(t._f("currency")(a.price)))]),e("td",{staticClass:"align-middle"},[e("div",[e("a",{staticClass:"text-secondary addfavcart",attrs:{href:"#"},on:{click:function(e){return t.addToCart(a.id)}}},[e("i",{staticClass:"fas fa-cart-plus"})])])])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"5"}},[e("a",{staticClass:"text-secondary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.clearAll(a)}}},[e("i",{staticClass:"far fa-trash-alt",attrs:{"aria-hidden":"true"}}),t._v(" 取消全部收藏 ")])])])])]),t.followProduct.length?e("div",{staticClass:"mt-5 text-center"},[e("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button"},on:{click:t.goToGoods}},[t._v(" 繼續購物 "),e("i",{staticClass:"fas fa-shopping-cart"})])]):t._e()])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"h5 text-secondary"},[t._v("“再忙，也別忘了犒賞自己唷！“ "),e("i",{staticClass:"far fa-smile-wink"})])}],r=(e("99af"),e("4de4"),e("c975"),e("a434"),e("56a6")),n={name:"Favorite",components:{AlertMessage:r["a"]},data:function(){return{products:{},followProduct:{},isLoading:!1,img:{banner:"https://hexschool-api.s3.us-west-2.amazonaws.com/custom/AIDb0jNmPStBMVophatDs0flxHppWV0yEArvZidhoLmlV0dNxLJEB9ywkq8XVKL8ZRvvEAPaXXucVgO1mcrXmPw2b7QTacURwimLQZT0ADrGJHHjzB8k7vjuwfP78lzf.jpeg"},followData:JSON.parse(localStorage.getItem("followCard"))||[],carts:{}}},methods:{getProducts:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/products");t.isLoading=!0,t.$http.get(a).then((function(a){t.products=a.data.data,t.getFollow(),t.isLoading=!1}))},getFollow:function(){var t=this;this.followProduct=this.products.filter((function(a){return t.followData.indexOf(a.id)>-1}))},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,s="".concat("https://course-ec-api.hexschool.io","/api/").concat("b2a0a13b-3f39-4e27-abe0-72d7b7e3eda8","/ec/shopping"),i={product:t,quantity:a};e.isLoading=!0,e.$http.post(s,i).then((function(){e.isLoading=!1,e.$bus.$emit("message:push","加入購物車成功","success"),e.$bus.$emit("getcart")})).catch((function(t){e.isLoading=!1;var a=t.response.data.errors[0];e.$bus.$emit("message:push","".concat(a),"danger")}))},delFollow:function(t){var a=this,e=this.followData.indexOf(t);-1!==e&&(a.followData.splice(e,1),a.$bus.$emit("message:push","取消收藏","danger")),localStorage.setItem("followCard",JSON.stringify(a.followData)),a.getProducts()},clearAll:function(){var t=this;t.followData.splice(0,t.followProduct.length),localStorage.setItem("followCard",JSON.stringify(t.followData)),t.$bus.$emit("message:push","取消全部收藏","danger"),t.getProducts()},goToGoods:function(){this.$router.push("/goods")}},created:function(){this.getProducts()}},o=n,c=e("2877"),l=Object(c["a"])(o,s,i,!1,null,null,null);a["default"]=l.exports},c975:function(t,a,e){"use strict";var s=e("23e7"),i=e("4d64").indexOf,r=e("a640"),n=e("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),d=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:c||!l||!d},{indexOf:function(t){return c?o.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},e6d3:function(t,a,e){},e7ca:function(t,a,e){"use strict";var s=e("e6d3"),i=e.n(s);i.a}}]);
//# sourceMappingURL=chunk-7f6a4460.3a1e8f05.js.map